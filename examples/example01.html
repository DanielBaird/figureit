<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" />
    <title>Test - Parasite Hatching Calculator</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="../dist/workit.css" />
</head>
<body>

<div id="workitform"></div>
<div id="workitresult"></div>

<!-- decent folk put their javascript at the bottom -->
<script src="../dist/workit.js"></script>
<script>
    var calendarBase =  '<div class="day"><div class="inner">Day 1</div></div>' +
                        '<div class="day"><div class="inner">Day 2</div></div>' +
                        '<div class="day"><div class="inner">Day 3</div></div>' +
                        '<div class="day"><div class="inner">Day 4</div></div>' +
                        '<div class="day"><div class="inner">Day 5</div></div>' +
                        '<div class="day"><div class="inner">Day 6</div></div>' +
                        '<div class="day"><div class="inner">Day 7</div></div>' +
                        '<div class="day"><div class="inner">Day 8</div></div>' +
                        '<div class="day"><div class="inner">Day 9</div></div>' +
                        '<div class="day"><div class="inner">Day 10</div></div>' +
                        '<div class="day"><div class="inner">Day 11</div></div>' +
                        '<div class="day"><div class="inner">Day 12</div></div>' +
                        '<div class="day"><div class="inner">Day 13</div></div>' +
                        '<div class="day"><div class="inner">Day 14</div></div>';

    var data = {
        vars: [
            {
                name: 'temperature',
                abbr: 'temp',
                units: '&#x2103;',
                source: 'ask',
                defaultVal: 26,
                failMin: 22, failMax: 34,
                failMsg: 'This tool applies to temperatures in the range 22&#x2103; to 34&#x2103;.'
            },{
                name: 'salinity',
                abbr: 'sal',
                units: '&#x2030;',
                source: 'ask',
                defaultVal: 35,
                failMin: 22, failMax: 40,
                failMsg: 'This tool applies to salinity in the range 22&#x2030; to 40&#x2030;.'
            },{
                name: 'hatching success',
                abbr: 'hatchrate',
                units: '%',
                source: 'calc',
                rounding: 0,
                lowcap: 5, highcap: 95,
                terms: [
                    '1',
                    'temp',
                    'sal',
                    'temp * sal',
                    'sq(temp)',
                    'sq(sal)',
                    'temp * sq(sal)',
                    'sq(temp) * sal',
                    'sq(temp) * sq(sal)'
                ], coefficients: [
                    -5.016,
                     2.891e-01,
                     2.120e+01,
                    -1.633,
                    -4.862e-03,
                    -1.207,
                     9.572e-02,
                     2.983e-02,
                    -1.761e-03
                ]
            },{
                name: 'infection success',
                abbr: 'infectrate',
                units: '%',
                source: 'calc',
                rounding: 0,
                lowcap: 5, highcap: 95,
                terms: [
                    '1',
                    'temp',
                    'sal',
                    'temp * sal',
                    'sq(temp)',
                    'sq(sal)',
                    'sq(temp) * sq(sal)',
                    'cu(temp)',
                    'p4(temp)'
                ], coefficients: [
                     1.66e+04,
                    -2.292e+03,
                    -1.184e+01,
                     5.388e-01,
                     1.172e+02,
                     1.796e-01,
                    -2.258e-04,
                    -2.637,
                     2.198e-02
                ]
            },{
                name: 'Last hatch',
                abbr: 'hatch',
                units: 'days',
                source: 'table'
            },{
                name: 'Larval longevity',
                abbr: 'larva',
                units: 'hours',
                source: 'table',
                hidden: true
            },{
                name: 'Sexual maturity',
                abbr: 'maturity',
                units: 'days',
                source: 'table'
            },{
                name: 'Earliest second treatment',
                abbr: 'early2nd',
                units: 'days',
                source: 'table',
                hidden: true
            },{
                name: 'Latest second treatment',
                abbr: 'late2nd',
                units: 'days',
                source: 'table',
                hidden: true
            },{
                name: 'Second treatment window',
                abbr: 'interval2nd',
                units: 'days',
                source: 'table',
                hidden: true
            },{
                name: 'Third treatment',
                abbr: 'third',
                units: 'days',
                source: 'table',
                hidden: true
            }
        ],
        // - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
        columnOrder: [
            'temp', 'sal', 'hatch', 'larva', 'maturity', 'early2nd', 'late2nd', 'interval2nd', 'third'
        ],
        // - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
        table: [
            '22, 22,  8, 24, 14,  9, 13,  5,  -',
            '22, 23,  8, 24, 14,  9, 13,  5,  -',
            '22, 24,  8, 24, 14,  9, 13,  5,  -',
            '22, 25,  8, 24, 13,  9, 12,  4,  -',
            '22, 26,  8, 24, 13,  9, 12,  4,  -',
            '22, 27,  8, 24, 13,  9, 12,  4,  -',
            '22, 28,  8, 24, 13,  9, 12,  4,  -',
            '22, 29,  8, 24, 13,  9, 12,  4,  -',
            '22, 30,  8, 48, 13, 10, 12,  3,  -',
            '22, 31,  8, 48, 12, 10, 11,  2,  -',
            '22, 32,  8, 48, 12, 10, 11,  2,  -',
            '22, 33,  8, 48, 12, 10, 11,  2,  -',
            '22, 34,  8, 48, 12, 10, 11,  2,  -',
            '22, 35,  7, 48, 12,  9, 11,  3,  -',
            '22, 36,  8, 48,  9,  8,  8,  1, 11',
            '22, 37,  8, 48,  9,  8,  8,  1, 11',
            '22, 38,  8, 48,  9,  8,  8,  1, 11',
            '22, 39,  8, 48,  9,  8,  8,  1, 11',
            '22, 40,  8, 49,  9,  8,  8,  1, 11',
            '23, 22,  8, 24, 14,  9, 13,  5,  -',
            '23, 23,  8, 24, 14,  9, 13,  5,  -',
            '23, 24,  8, 24, 14,  9, 13,  5,  -',
            '23, 25,  8, 24, 13,  9, 12,  4,  -',
            '23, 26,  8, 24, 13,  9, 12,  4,  -',
            '23, 27,  8, 24, 13,  9, 12,  4,  -',
            '23, 28,  8, 24, 13,  9, 12,  4,  -',
            '23, 29,  8, 48, 13, 10, 12,  3,  -',
            '23, 30,  8, 48, 13, 10, 12,  3,  -',
            '23, 31,  8, 48, 12, 10, 11,  2,  -',
            '23, 32,  8, 48, 12, 10, 11,  2,  -',
            '23, 33,  8, 48, 12, 10, 11,  2,  -',
            '23, 34,  7, 48, 12,  9, 11,  3,  -',
            '23, 35,  7, 48, 12,  9, 11,  3,  -',
            '23, 36,  7, 48, 11,  9, 10,  2,  -',
            '23, 37,  7, 48, 11,  9, 10,  2,  -',
            '23, 38,  7, 48, 10,  9,  9,  1,  -',
            '23, 39,  6, 48, 10,  8,  9,  2,  -',
            '23, 40,  6, 49, 10,  8,  9,  2,  -',
            '24, 22,  5, 24, 14,  7, 13,  7,  -',
            '24, 23,  5, 24, 14,  7, 13,  7,  -',
            '24, 24,  5, 24, 13,  7, 12,  6,  -',
            '24, 25,  5, 24, 13,  7, 12,  6,  -',
            '24, 26,  5, 24, 13,  7, 12,  6,  -',
            '24, 27,  5, 24, 12,  7, 11,  5,  -',
            '24, 28,  5, 24, 12,  7, 11,  5,  -',
            '24, 29,  5, 24, 11,  7, 10,  4,  -',
            '24, 30,  5, 24, 11,  7, 10,  4,  -',
            '24, 31,  5, 24, 11,  7, 10,  4,  -',
            '24, 32,  5, 24, 11,  7, 10,  4,  -',
            '24, 33,  5, 24, 11,  7, 10,  4,  -',
            '24, 34,  5, 24, 11,  7, 10,  4,  -',
            '24, 35,  5, 24, 11,  7, 10,  4,  -',
            '24, 36,  5, 48, 11,  8, 10,  3,  -',
            '24, 37,  5, 48, 11,  8, 10,  3,  -',
            '24, 38,  5, 48, 11,  8, 10,  3,  -',
            '24, 39,  5, 48, 11,  8, 10,  3,  -',
            '24, 40,  5, 48, 12,  8, 11,  4,  -',
            '25, 22,  5, 24, 13,  6, 12,  7,  -',
            '25, 23,  5, 24, 13,  6, 12,  7,  -',
            '25, 24,  5, 24, 12,  6, 11,  6,  -',
            '25, 25,  5, 24, 12,  6, 11,  6,  -',
            '25, 26,  5, 24, 12,  6, 11,  6,  -',
            '25, 27,  5, 24, 11,  6, 10,  5,  -',
            '25, 28,  5, 24, 11,  6, 10,  5,  -',
            '25, 29,  5, 24, 10,  6,  9,  4,  -',
            '25, 30,  5, 24, 10,  6,  9,  4,  -',
            '25, 31,  5, 24, 10,  6,  9,  4,  -',
            '25, 32,  5, 24,  9,  6,  8,  3,  -',
            '25, 33,  5, 24,  9,  6,  8,  3,  -',
            '25, 34,  5, 24,  9,  6,  8,  3,  -',
            '25, 35,  5, 24,  9,  6,  8,  3,  -',
            '25, 36,  5, 24,  9,  6,  8,  3,  -',
            '25, 37,  5, 48,  9,  7,  8,  2,  -',
            '25, 38,  5, 48,  9,  7,  8,  2,  -',
            '25, 39,  5, 48,  9,  7,  8,  2,  -',
            '25, 40,  5, 48,  9,  7,  8,  2,  -',
            '26, 22,  5, 24, 12,  6, 11,  6,  -',
            '26, 23,  5, 24, 12,  6, 11,  6,  -',
            '26, 24,  5, 24, 12,  6, 11,  6,  -',
            '26, 25,  5, 24, 11,  6, 10,  5,  -',
            '26, 26,  5, 24, 11,  6, 10,  5,  -',
            '26, 27,  5, 24, 10,  6,  9,  4,  -',
            '26, 28,  5, 24, 10,  6,  9,  4,  -',
            '26, 29,  5, 24, 10,  6,  9,  4,  -',
            '26, 30,  5, 24,  9,  6,  8,  3,  -',
            '26, 31,  5, 24,  9,  6,  8,  3,  -',
            '26, 32,  5, 24,  9,  6,  8,  3,  -',
            '26, 33,  5, 24,  9,  6,  8,  3,  -',
            '26, 34,  5, 24,  8,  6,  7,  2,  -',
            '26, 35,  5, 24,  7,  6,  6,  1,  -',
            '26, 36,  5, 24,  7,  6,  6,  1,  -',
            '26, 37,  5, 24,  7,  6,  6,  1,  -',
            '26, 38,  5, 48,  6,  5,  5,  1,  8',
            '26, 39,  5, 48,  6,  5,  5,  1,  8',
            '26, 40,  5, 48,  6,  5,  5,  1,  8',
            '27, 22,  5, 24, 12,  6, 11,  6,  -',
            '27, 23,  5, 24, 12,  6, 11,  6,  -',
            '27, 24,  5, 24, 11,  6, 10,  5,  -',
            '27, 25,  5, 24, 11,  6, 10,  5,  -',
            '27, 26,  5, 24, 10,  6, 10,  5,  -',
            '27, 27,  5, 24, 10,  6,  9,  4,  -',
            '27, 28,  5, 24, 10,  6,  9,  4,  -',
            '27, 29,  5, 24,  9,  6,  8,  3,  -',
            '27, 30,  5, 24,  9,  6,  8,  3,  -',
            '27, 31,  5, 24,  9,  6,  8,  3,  -',
            '27, 32,  5, 24,  8,  6,  7,  2,  -',
            '27, 33,  5, 24,  8,  6,  7,  2,  -',
            '27, 34,  5, 24,  8,  6,  7,  2,  -',
            '27, 35,  5, 24,  8,  6,  7,  2,  -',
            '27, 36,  5, 24,  7,  6,  6,  1,  -',
            '27, 37,  5, 24,  7,  6,  6,  1,  -',
            '27, 38,  5, 48,  7,  6,  6,  1,  8',
            '27, 39,  5, 48,  7,  6,  6,  1,  8',
            '27, 40,  5, 48,  7,  6,  6,  1,  8',
            '28, 22,  5, 24, 12,  6, 11,  6,  -',
            '28, 23,  5, 24, 11,  6, 10,  5,  -',
            '28, 24,  5, 24, 11,  6, 10,  5,  -',
            '28, 25,  5, 24, 10,  6,  9,  4,  -',
            '28, 26,  5, 24, 10,  6,  9,  4,  -',
            '28, 27,  5, 24, 10,  6,  9,  4,  -',
            '28, 28,  5, 24,  9,  6,  8,  3,  -',
            '28, 29,  5, 24,  9,  6,  8,  3,  -',
            '28, 30,  5, 24,  9,  6,  8,  3,  -',
            '28, 31,  5, 24,  9,  6,  8,  3,  -',
            '28, 32,  5, 24,  9,  6,  8,  3,  -',
            '28, 33,  5, 24,  9,  6,  8,  3,  -',
            '28, 34,  5, 24,  9,  6,  8,  3,  -',
            '28, 35,  5, 24,  9,  6,  8,  3,  -',
            '28, 36,  5, 24,  9,  6,  8,  3,  -',
            '28, 37,  5, 24,  9,  6,  8,  3,  -',
            '28, 38,  5, 24,  9,  6,  8,  3,  -',
            '28, 39,  5, 24,  9,  6,  8,  3,  -',
            '28, 40,  5, 24,  9,  6,  8,  3,  -',
            '29, 22,  5, 24, 12,  6, 11,  6,  -',
            '29, 23,  5, 24, 11,  6, 10,  5,  -',
            '29, 24,  5, 24, 11,  6, 10,  5,  -',
            '29, 25,  5, 24, 10,  6,  9,  4,  -',
            '29, 26,  6, 24, 10,  6,  9,  4,  -',
            '29, 27,  6, 24,  9,  7,  8,  2,  -',
            '29, 28,  6, 24,  9,  7,  8,  2,  -',
            '29, 29,  6, 24,  9,  7,  8,  2,  -',
            '29, 30,  6, 24,  9,  7,  8,  2,  -',
            '29, 31,  6, 24,  8,  7,  7,  1,  -',
            '29, 32,  6, 24,  8,  7,  7,  1,  -',
            '29, 33,  6, 24,  8,  7,  7,  1,  -',
            '29, 34,  6, 24,  7,  5,  5,  1,  8',
            '29, 35,  6, 24,  7,  5,  5,  1,  8',
            '29, 36,  6, 24,  7,  5,  5,  1,  8',
            '29, 37,  6, 24,  7,  5,  5,  1,  8',
            '29, 38,  6, 24,  7,  5,  5,  1,  8',
            '29, 39,  7, 24,  7,  6,  6,  1,  8',
            '29, 40,  7, 24,  7,  6,  6,  1,  8',
            '30, 22,  9, 24,  8,  7,  7,  1, 10',
            '30, 23,  8, 24,  8,  7,  7,  1,  9',
            '30, 24,  7, 24,  8,  7,  7,  1,  9',
            '30, 25,  7, 24,  8,  7,  7,  1,  9',
            '30, 26,  7, 24,  8,  7,  7,  1,  9',
            '30, 27,  7, 24,  8,  7,  7,  1,  9',
            '30, 28,  7, 24,  8,  7,  7,  1,  9',
            '30, 29,  7, 24,  8,  7,  7,  1,  9',
            '30, 30,  6, 24,  8,  7,  7,  1,  -',
            '30, 31,  6, 24,  8,  7,  7,  1,  -',
            '30, 32,  6, 24,  8,  7,  7,  1,  -',
            '30, 33,  6, 24,  8,  5,  5,  1,  9',
            '30, 34,  6, 24,  7,  5,  5,  1,  8',
            '30, 35,  6, 24,  6,  5,  5,  1,  7',
            '30, 36,  6, 24,  6,  5,  5,  1,  7',
            '30, 37,  6, 24,  6,  5,  5,  1,  7',
            '30, 38,  6, 24,  6,  5,  5,  1,  7',
            '30, 39,  6, 24,  6,  5,  5,  1,  7',
            '30, 40,  6, 24,  6,  5,  5,  1,  7',
            '31, 22,  7, 24,  8,  7,  7,  1,  9',
            '31, 23,  7, 24,  8,  7,  7,  1,  9',
            '31, 24,  7, 24,  8,  7,  7,  1,  9',
            '31, 25,  7, 24,  8,  7,  7,  1,  9',
            '31, 26,  7, 24,  8,  7,  7,  1,  9',
            '31, 27,  7, 24,  8,  7,  7,  1,  9',
            '31, 28,  7, 24,  8,  7,  7,  1,  9',
            '31, 29,  7, 24,  8,  7,  7,  1,  9',
            '31, 30,  7, 24,  8,  7,  7,  1,  9',
            '31, 31,  7, 24,  8,  7,  7,  1,  9',
            '31, 32,  6, 24,  8,  7,  7,  1,  9',
            '31, 33,  6, 24,  8,  7,  7,  1,  9',
            '31, 34,  6, 24,  7,  6,  6,  1,  8',
            '31, 35,  6, 24,  6,  5,  5,  1,  7',
            '31, 36,  6, 24,  6,  5,  5,  1,  7',
            '31, 37,  6, 24,  7,  6,  6,  1,  8',
            '31, 38,  6, 24,  7,  6,  6,  1,  8',
            '31, 39,  6, 24,  7,  6,  6,  1,  8',
            '31, 40,  6, 24,  7,  6,  6,  1,  8',
            '32, 22,  4, 24,  8,  7,  7,  1,  9',
            '32, 23,  8, 24,  8,  7,  7,  1,  9',
            '32, 24,  8, 24,  8,  7,  7,  1,  9',
            '32, 25,  8, 24,  8,  7,  7,  1,  9',
            '32, 26,  8, 24,  8,  7,  7,  1,  9',
            '32, 27,  8, 24,  8,  7,  7,  1,  9',
            '32, 28,  8, 24,  7,  6,  6,  1,  9',
            '32, 29,  8, 24,  7,  6,  6,  1,  9',
            '32, 30,  8, 24,  7,  6,  6,  1,  9',
            '32, 31,  8, 24,  7,  6,  6,  1,  9',
            '32, 32,  8, 24,  7,  6,  6,  1,  9',
            '32, 33,  8, 24,  6,  5,  5,  1,  9',
            '32, 34,  8, 24,  6,  5,  5,  1,  9',
            '32, 35,  8, 24,  6,  5,  5,  1,  9',
            '32, 36,  8, 24,  6,  5,  5,  1,  9',
            '32, 37,  8, 24,  7,  6,  6,  1,  9',
            '32, 38,  8, 24,  7,  6,  6,  1,  9',
            '32, 39,  8, 24,  8,  7,  7,  1,  9',
            '32, 40,  8, 24,  8,  7,  7,  1,  9',
            '33, 22,  8, 24, 13,  9, 12,  4,  -',
            '33, 23,  8, 24, 13,  9, 12,  4,  -',
            '33, 24,  8, 24, 13,  9, 12,  4,  -',
            '33, 25,  8, 24, 13,  9, 12,  4,  -',
            '33, 26,  8, 24, 12,  9, 11,  3,  -',
            '33, 27,  8, 24, 11,  9, 10,  2,  -',
            '33, 28,  8, 24, 11,  9, 10,  2,  -',
            '33, 29,  8, 24, 10,  9,  9,  1,  -',
            '33, 30,  8, 24, 10,  9,  9,  1,  -',
            '33, 31,  8, 24, 10,  9,  9,  1,  -',
            '33, 32,  8, 24,  9,  8,  8,  1, 10',
            '33, 33,  8, 24,  9,  8,  8,  1, 10',
            '33, 34,  8, 24,  9,  8,  8,  1, 10',
            '33, 35,  8, 24,  9,  8,  8,  1, 10',
            '33, 36,  8, 24,  8,  7,  7,  1,  9',
            '33, 37,  8, 24,  8,  7,  7,  1,  9',
            '33, 38,  8, 24,  8,  7,  7,  1,  9',
            '33, 39,  8, 24,  8,  7,  7,  1,  9',
            '33, 40,  8, 24,  8,  7,  7,  1,  9',
            '34, 22,  9, 24, 13, 10, 12,  3,  -',
            '34, 23,  9, 24, 12, 10, 11,  2,  -',
            '34, 24,  9, 24, 12, 10, 11,  2,  -',
            '34, 25,  9, 24, 12, 10, 11,  2,  -',
            '34, 26,  9, 24, 12, 10, 11,  2,  -',
            '34, 27,  9, 24, 12, 10, 11,  2,  -',
            '34, 28,  9, 24, 12, 10, 11,  2,  -',
            '34, 29,  9, 24, 12, 10, 11,  2,  -',
            '34, 30,  9, 24, 12, 10, 11,  2,  -',
            '34, 31,  9, 24, 12, 10, 11,  2,  -',
            '34, 32,  9, 24, 12, 10, 11,  2,  -',
            '34, 33,  9, 24, 12, 10, 11,  2,  -',
            '34, 34,  9, 24, 12, 10, 11,  2,  -',
            '34, 35,  9, 24, 12, 10, 11,  2,  -',
            '34, 36,  9, 24,  8,  7,  7,  1, 10',
            '34, 37,  9, 24,  8,  7,  7,  1, 10',
            '34, 38,  9, 24,  8,  7,  7,  1, 10',
            '34, 39,  9, 24,  8,  7,  7,  1, 10',
            '34, 40,  9, 24,  8,  7,  7,  1, 10'
        ],
        // - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
        conclusions: [{
            condition: '!early2nd',
            content: 'No further treatment is necessary.'
        },{
            condition: 'early2nd == late2nd && !third',
            content:
                '<p class="recommendation">' +
                    'Second treatment <b>$$early2nd days</b> after first; ' +
                    'no third treatment necessary.' +
                '</p>' +
                '<div class="calendar">' +
                    '<div class="indicator first"><div class="inner">1st</div></div>' +
                    '<div class="indicator second" style="left: $$early2ndem; width: $$interval2ndem"><div class="inner">2nd</div></div>' +
                    calendarBase +
                '</div>'
        },{
            condition: 'early2nd == late2nd && third',
            content:
                '<p class="recommendation">' +
                    'Second treatment <b>$$early2nd days</b> after first; ' +
                    'third treatment <b>$$third days</b> after first.' +
                '</p>' +
                '<div class="calendar">' +
                    '<div class="indicator first"><div class="inner">1st</div></div>' +
                    '<div class="indicator second" style="left: $$early2ndem; width: $$interval2ndem"><div class="inner">2nd</div></div>' +
                    '<div class="indicator third" style="left: $$thirdem"><div class="inner">3rd</div></div>' +
                    calendarBase +
                '</div>'
        },{
            condition: 'early2nd != late2nd && !third',
            content:
                '<p class="recommendation">' +
                    'Second treatment <b>$$early2nd to $$late2nd days</b> after first; ' +
                    'no third treatment necessary.' +
                '</p>' +
                '<div class="calendar">' +
                    '<div class="indicator first"><div class="inner">1st</div></div>' +
                    '<div class="indicator second" style="left: $$early2ndem; width: $$interval2ndem"><div class="inner">2nd</div></div>' +
                    calendarBase +
                '</div>'
        },{
            condition: 'early2nd != late2nd && third',
            content:
                '<p class="recommendation">' +
                    'Second treatment <b>$$early2nd to $$late2nd days</b> after first; ' +
                    'third treatment <b>$$third days</b> after the first.' +
                '</p>' +
                '<div class="calendar">' +
                    '<div class="indicator first"><div class="inner">1st</div></div>' +
                    '<div class="indicator second" style="left: $$early2ndem; width: $$interval2ndem"><div class="inner">2nd</div></div>' +
                    '<div class="indicator third" style="left: $$thirdem"><div class="inner">3rd</div></div>' +
                    calendarBase +
                '</div>'
        }]
    }
    // --------------------------------------------------------------
    workit.init(data, {
        logTo: 'console',
        logLevel: 'debug'
    });
    // --------------------------------------------------------------
</script>
</body>
</html>
